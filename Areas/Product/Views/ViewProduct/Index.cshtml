@model List<Product>;
@using AppMvc.Net.Components;
@{
  List<CategoryProduct> categories = ViewBag.categories as List<CategoryProduct>;
  CategoryProduct category = ViewBag.category as CategoryProduct;
  ViewData["Title"] = (category != null) ? category.Title : "Tat ca san pham";
}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="~">Home</a></li>
    @if (category != null)
    {
      var li = category.ListParents();
      foreach (var l in li)
      {
        <li class="breadcrumb-item">
          <a asp-action="Index" asp-route-categoryslug="@l.Slug">@l.Title</a>
        </li>
      }

    }
  </ol>
</nav>
<h1>@ViewData["Title"]</h1>
@if (category != null)
{
  @* <p>@Html.Raw(category.Description)</p> *@
  <p>@category.Description</p>

}
else
{
  <p>Toan bo san pham trong tat ca cac danh muc...</p>
}
<hr>
<div class="d-flex flex-wrap justify-content-between">
  @foreach (var product in Model)
{
  var srcImg = "/contents/noimage.jpg";
  if(product.Photos.Any())
  {
    srcImg = $"/contents/Products/{product.Photos.FirstOrDefault().FileName}";
  }
    <div class="card mb-2" style="width: 32%;">
      <img src="@srcImg" class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">@product.Title</h5>
        <p class="card-text">@product.Description.</p>
        <p><strong class="text-danger">@product.ProductCategoryProducts.FirstOrDefault()?.Category.Title</strong></p>
        <p>Gia: <strong>@product.Price</strong></p>
        <div class="card-body">
          <a class="card-link" asp-action="Detail" asp-controller="ViewProduct" asp-route-productslug="@product.Slug">Chi
            tiet</a>
          <a asp-action="AddToCart" asp-route-productid="@product.ProductId" class="btn btn-primary ml-4">Dat hang</a>
        </div>
      </div>
    </div>


  @* <div class="d-flex align-items-cente border-bottom mb-3 pb-3">
<div class="flex-shrink-0">
<img src="/contents/noimage.jpg" alt="..." class="w-25">
</div>
<div class="flex-grow-1 ms-3">
<h5 class="mt-0">
<a asp-action="Detail" asp-controller="ViewPost" asp-route-postslug="@product.Slug">@product.Title</a>
</h5>
@product.Description
<div>
Chủ đề:
<strong class="text-danger">@product.ProductCategoryProducts.FirstOrDefault()?.Category.Title</strong>
</div>
<div class="author-row">
Tác giả: <strong>@product.Author</strong>|
Ngày cập nhật: <i>@product.DateUpdated.ToShortDateString()</i>

</div>
</div>
</div> *@

}

</div>


Đây là nội dung chuyên mục
@section Sidebar {
  @await Component.InvokeAsync("AppMvc.Net.Components.CategoryProductSidebar",
    new CategoryProductSidebar.CategorySidebarData()
{
  Categories = categories,
  Level = 0,
  CategorySlug = ViewBag.categoryslug

})
}
<partial name="_PagingXTL" model="@ViewBag.PagingModel"></partial>
